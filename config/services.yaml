parameters:
    locale: 'en'

services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false  

    App\:
        resource: '../src/*'
        exclude: '../src/{DependencyInjection,Entity,Migrations,Tests,Kernel.php}'

    App\Controller\:
        resource: '../src/Controller'
        tags: ['controller.service_arguments']

    # custom extension to extend queries on user collections
    'App\Doctrine\CurrentClientExtension':
        tags:
            - { name: api_platform.doctrine.orm.query_extension.collection, priority: 9 }
    
    # custom decorator to document token obtainment     
    'App\Swagger\TokenDecorator':
        decorates: 'api_platform.swagger.normalizer.documentation'
        arguments: [ '@App\Swagger\TokenDecorator.inner' ]
        autoconfigure: false
